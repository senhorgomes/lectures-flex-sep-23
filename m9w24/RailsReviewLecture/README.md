# M09W24 - Rails review

 - Learn Rails from the commandline
 - Learn Rails from our IDE

### To Do

- [ ] "Rails Week" Conversation
- [ ] MVC Review
- [ ] Quickly build simple Rails app
- [ ] Nested Resources

React is CSR

Rails is SSR


<!-- React is actually just a library -->

- Why we don't consider React a framework?
    - React can do SPA
    - React can't do, database management, MPA, routing, etc.

<!-- Rails is a framework = library of libraries -->

- Routing
- Database Management -> Active Record
- MPA/SPA

### Model View Controller Review

- **Model:** Responsible for handling data logic (eg. database queries)
- **View:** Responsible for the UI (User Interface)
- **Controller:** Ties the model and view together, talks to both and shares data between them
- Rails also uses a router (`routes.rb`) sitting between the user requests and the controllers that respond to those requests

![MVC Diagram](https://raw.githubusercontent.com/tborsa/LighthouseLabs/master/lectures/Week7/Day3/Lecture/assets/mvc-rails.png)

### Rails Libraries

- Rails is a framework made up of a collection of libraries
- **Active Record**
  - An Object Relational Mapper (ORM)
  - Allows you to query and modify the application data in an intuitive way
- **Action View**
  - Handles template lookup and rendering
  - Provides helpers for building forms and other UI elements
- **Action Controller**
  - Controller library
  - Controller's make sense of the request and decide what should be returned to the client
- **Action Dispatch**
  - The Rails router
  - Handles incoming requests and forwards them to the correct controller
- **Action Cable**
  - Websockets for Rails

### Nested Routes

- We define the nesting in our routes. In routes.rb:

```ruby
resources :authors do
  resources :books
end
```

- Will generate:

```sh
author_books      GET    /authors/:author_id/books(.:format)          books#index
                  POST   /authors/:author_id/books(.:format)          books#create
new_author_book   GET    /authors/:author_id/books/new(.:format)      books#new
edit_author_book  GET    /authors/:author_id/books/:id/edit(.:format) books#edit
author_book       GET    /authors/:author_id/books/:id(.:format)      books#show
                  PATCH  /authors/:author_id/books/:id(.:format)      books#update
                  PUT    /authors/:author_id/books/:id(.:format)      books#update
                  DELETE /authors/:author_id/books/:id(.:format)
```

- Notice that these routes will be affected by the `books` Controller. All the logic will go there to work with these nested routes.
- There are some nice helpful path helpers that get generated by this nested resource stuff. If you look at rake routes, you'll see the prefixes for these under PREFIX. For example, the path `/authors/5/books` could be generated by calling `author_books(@author)`.

## Rails in the Terminal

We can use Rails in the terminal to generate code for our application, run a server, run tests, check our routes, or even run code in our application! It is important to get familiar with the terminal if you want to work with Rails on the regular, it'll help you follow its conventions more correctly and get a lot done quickly. [Ensure you practice in the command line often](https://guides.rubyonrails.org/command_line.html)!

## Versions are Important

Just like with Node.JS, and even with JavaScript in the browser, which specification we're following and which features we have available will matter when we're writing our applicatons. When reading documentation, ensure you check that the version of that documentation is intended for the version you're using in development. If the version doesn't match, or is no-where near similar, you may run into unexpected results or have to find an alternative approach.

One common case you may come across in examples is the use of `bin/rake` and `bin/rails` versus use of `rake` and `rails`.

Check the version of your software, when in doubt, using:

* `ruby --version`

* `rails --version`

If you find you have the wrong version installed, it is best to ensure you have [RVM](https://rvm.io/) installed. Once installed, you can switch between installed versions via its `use` command, or install other versions consider the `install` command. A fuller list of its features exists [here](https://rvm.io/rvm/cli).

## Getting Started in Ruby on Rails

`rails new your-project-name`

This command creates a folder containing a Rails project, its name will reflect the one you entered after `new`.

If you don't need to display a detailed front-end and want to work on an API [capable of sending JSON (or another standard format) responses](https://dev.to/caicindy87/rendering-json-in-a-rails-api-25fd) you may want to consider running this with the API option:

`rails new your-api-project-name --api`

There are [other generator modifiers](https://blog.appsignal.com/2022/05/04/bootstrapping-with-ruby-on-rails-generators-and-templates.html) as well, it is a good idea to get familiar with the ones you use often.

Consider making [a cheatsheet](https://overapi.com/static/cs/RubyOnRails-Cheatsheet-BlaineKendall.pdf) with the commands and concepts you feel you might need a reminder of. It can be useful to include this in a GitHub repository so you can easily access it from anywhere, and even share it with others!

### Useful Links

- [react-rails gem](https://github.com/reactjs/react-rails)
- [`dotenv` for Rails](https://github.com/bkeepers/dotenv)

#### Some notes borrowed from Travis' [lecture](https://github.com/tborsa/lectures/blob/master/week10/day1/notes.md) and Vas' [lecture](https://web.compass.lighthouselabs.ca/activities/433/lectures/3022)


Two tables
- Author
    - first_name
    - last_name
- Books
    - title
    - print_date
    - publisher
    - genre
    - page_count
    - price
    - Reference Authors

- Create our Author controlers
- Views
- See what routes we have, and display all Authors in our /authors page


Rails - Frontend and Backend

React - Frontend
Rails - Backend